<?xml version="1.0" encoding="UTF-8"?><xdd:delta xmlns:xdd="http://codinuum.com/diffts/delta/" xdd:reversible="false" xdd:normalized="false" xdd:lang="java" xdd:digest="MD5_2c64fba625be81e4d58c3a9efa12c459" xdd:digest_="MD5_d4d31bf9b5ae0df3f79ac4a50fafddd0"><xdd:change xdd:path="2/0/1/45/1"><ReferenceType name="List"></ReferenceType></xdd:change><xdd:change_attr xdd:path="2/0/1/45/3/0" xdd:attr="name" xdd:new_value="log"/><xdd:insert xdd:stid="2" xdd:path="2/0/1/53_2"><MethodDeclaration name="lastAccessed" ___signature="(LFile;)LInstant;"><Modifiers><Private/></Modifiers><ReferenceType name="Instant"/><Parameters name="(LFile;)LInstant;"><Parameter name="fileReference" dims="0" va="false"><ReferenceType name="File"/></Parameter></Parameters><MethodBody><LocalVariableDeclarationStatement name="fileAttributes[0"><ReferenceType name="BasicFileAttributes"/><VariableDeclarator name="fileAttributes" dims="0"/></LocalVariableDeclarationStatement><TryStatement><Block><AssignStatement tid=""><Name name="fileAttributes"/><SimpleMethodInvocation name="readAttributes"><Arguments><PrimaryMethodInvocation name="toPath"><Name name="fileReference"/><Arguments/></PrimaryMethodInvocation><ClassLiteral name="BasicFileAttributes"><ReferenceType name="BasicFileAttributes"/></ClassLiteral></Arguments></SimpleMethodInvocation></AssignStatement><ReturnStatement><PrimaryMethodInvocation name="toInstant"><PrimaryMethodInvocation name="lastAccessTime"><Name name="fileAttributes"/><Arguments/></PrimaryMethodInvocation><Arguments/></PrimaryMethodInvocation></ReturnStatement></Block><CatchClause tid="3380dad550618cf7a34652caa0defbb9" __tid="CatchParameter(,0)"><CatchParameter name="e" dims="0"><ReferenceType name="IOException"/></CatchParameter><Block><ThrowStatement><StandardInstanceCreation name="UncheckedIOException"><ReferenceType name="UncheckedIOException"/><Arguments><Name name="e"/></Arguments></StandardInstanceCreation></ThrowStatement></Block></CatchClause></TryStatement></MethodBody></MethodDeclaration></xdd:insert><xdd:insert xdd:stid="3" xdd:path="2/0/1/53_1"><MethodDeclaration name="isLastFileAccessBefore" ___signature="(LFile;LInstant;)Z"><Modifiers><Private/></Modifiers><BooleanType/><Parameters name="(LFile;LInstant;)Z"><Parameter name="fileReference" dims="0" va="false"><ReferenceType name="File"/></Parameter><Parameter name="instant" dims="0" va="false"><ReferenceType name="Instant"/></Parameter></Parameters><MethodBody><ReturnStatement><PrimaryMethodInvocation name="isBefore"><SimpleMethodInvocation name="lastAccessed"><Arguments><Name name="fileReference"/></Arguments></SimpleMethodInvocation><Arguments><Name name="instant"/></Arguments></PrimaryMethodInvocation></ReturnStatement></MethodBody></MethodDeclaration></xdd:insert><xdd:insert xdd:stid="4" xdd:path="2/0/1/46_1"><MethodDeclaration name="sortedUnusedFileReferences" ___signature="(LFile;LSet;LDuration;)LList;"><Modifiers><Private/></Modifiers><ReferenceType name="List"><TypeArguments nth="1" name="java.util.List"><ReferenceType name="String"/></TypeArguments></ReferenceType><Parameters name="(LFile;LSet;LDuration;)LList;"><Parameter name="fileReferencesPath" dims="0" va="false"><ReferenceType name="File"/></Parameter><Parameter name="fileReferencesInUse" dims="0" va="false"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String"/></TypeArguments></ReferenceType></Parameter><Parameter name="keepFileReferences" dims="0" va="false"><ReferenceType name="Duration"/></Parameter></Parameters><MethodBody><LocalVariableDeclarationStatement name="fileReferencesOnDisk[0"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String"/></TypeArguments></ReferenceType><VariableDeclarator name="fileReferencesOnDisk" dims="0"><SimpleMethodInvocation name="getFileReferencesOnDisk"><Arguments><Name name="fileReferencesPath"/></Arguments></SimpleMethodInvocation></VariableDeclarator></LocalVariableDeclarationStatement><PrimaryMethodInvocationStatement name="log"><Name name="log"/><Arguments><Name name="Level.FINE"><Name name="Level"/></Name><Lambda><Parameters name=""/><NaryAdd><StringLiteral value="RmlsZSByZWZlcmVuY2VzIG9uIGRpc2sgKGluIA=="/><Name name="fileReferencesPath"/><StringLiteral value="KTog"/><Name name="fileReferencesOnDisk"/></NaryAdd></Lambda></Arguments></PrimaryMethodInvocationStatement><LocalVariableDeclarationStatement name="instant[0"><ReferenceType name="Instant"/><VariableDeclarator name="instant" dims="0"><PrimaryMethodInvocation name="minus"><PrimaryMethodInvocation name="instant"><Arguments/></PrimaryMethodInvocation><Arguments><Name name="keepFileReferences"/></Arguments></PrimaryMethodInvocation></VariableDeclarator></LocalVariableDeclarationStatement><ReturnStatement><PrimaryMethodInvocation name="collect"><PrimaryMethodInvocation name="sorted"><PrimaryMethodInvocation name="filter"><PrimaryMethodInvocation name="filter"><PrimaryMethodInvocation name="stream"><Name name="fileReferencesOnDisk"/><Arguments/></PrimaryMethodInvocation><Arguments><Lambda><InferredFormalParameter name="fileReference"/><Negation><PrimaryMethodInvocation name="contains"><Name name="fileReferencesInUse"/><Arguments><Name name="fileReference"/></Arguments></PrimaryMethodInvocation></Negation></Lambda></Arguments></PrimaryMethodInvocation><Arguments><Lambda><InferredFormalParameter name="fileReference"/><SimpleMethodInvocation name="isLastFileAccessBefore"><Arguments><StandardInstanceCreation name="File"><ReferenceType name="File"/><Arguments><Name name="fileReferencesPath"/><Name name="fileReference"/></Arguments></StandardInstanceCreation><Name name="instant"/></Arguments></SimpleMethodInvocation></Lambda></Arguments></PrimaryMethodInvocation><Arguments><TypeMethodInvocation name="Comparator" ident="comparing"><ClassType name="Comparator"/><Arguments><Lambda><InferredFormalParameter name="a"/><SimpleMethodInvocation name="lastAccessed"><Arguments><StandardInstanceCreation name="File"><ReferenceType name="File"/><Arguments><Name name="fileReferencesPath"/><Name name="a"/></Arguments></StandardInstanceCreation></Arguments></SimpleMethodInvocation></Lambda></Arguments></TypeMethodInvocation></Arguments></PrimaryMethodInvocation><Arguments><TypeMethodInvocation name="Collectors" ident="toList"><ClassType name="Collectors"/><Arguments/></TypeMethodInvocation></Arguments></PrimaryMethodInvocation></ReturnStatement></MethodBody></MethodDeclaration></xdd:insert><xdd:insert xdd:stid="7" xdd:path="2/0/1/46/0_-3"><Modifiers><Private/></Modifiers></xdd:insert><xdd:insert xdd:stid="8" xdd:path="2/0/1/45/3/0_7"><ReturnStatement><Name name="fileReferencesToDelete"/></ReturnStatement></xdd:insert><xdd:insert xdd:stid="9" xdd:path="2/0/1/45/3/0_6"><IfStatement><Gt><PrimaryMethodInvocation name="size"><Name name="fileReferencesToDelete"/><Arguments/></PrimaryMethodInvocation><IntegerLiteral value="0"/></Gt><Block><PrimaryMethodInvocationStatement name="log"><Name name="log"/><Arguments><Name name="Level.FINE"><Name name="Level"/></Name><Lambda><Parameters name=""/><Add><StringLiteral value="V2lsbCBkZWxldGUgZmlsZSByZWZlcmVuY2VzIG5vdCBpbiB1c2U6IA=="/><Name name="fileReferencesToDelete"/></Add></Lambda></Arguments></PrimaryMethodInvocationStatement><PrimaryMethodInvocationStatement name="forEach"><Name name="fileReferencesToDelete"/><Arguments><Lambda><InferredFormalParameter name="fileReference"/><Block><LocalVariableDeclarationStatement name="file[0"><ReferenceType name="File"/><VariableDeclarator name="file" dims="0"><StandardInstanceCreation name="File"><ReferenceType name="File"/><Arguments><Name name="fileReferencesPath"/><Name name="fileReference"/></Arguments></StandardInstanceCreation></VariableDeclarator></LocalVariableDeclarationStatement><IfStatement><Negation><TypeMethodInvocation name="IOUtils" ident="recursiveDeleteDir"><ClassType name="IOUtils"/><Arguments><Name name="file"/></Arguments></TypeMethodInvocation></Negation><PrimaryMethodInvocationStatement name="log"><Name name="log"/><Arguments><Name name="Level.WARNING"><Name name="Level"/></Name><Add><StringLiteral value="Q291bGQgbm90IGRlbGV0ZSA="/><PrimaryMethodInvocation name="getAbsolutePath"><Name name="file"/><Arguments/></PrimaryMethodInvocation></Add></Arguments></PrimaryMethodInvocationStatement></IfStatement></Block></Lambda></Arguments></PrimaryMethodInvocationStatement></Block></IfStatement></xdd:insert><xdd:insert xdd:stid="10" xdd:path="2/0/1/45/3/0_5"><LocalVariableDeclarationStatement name="fileReferencesToDelete[0"><ReferenceType name="List"><TypeArguments nth="1" name="java.util.List"><ReferenceType name="String"/></TypeArguments></ReferenceType><VariableDeclarator name="fileReferencesToDelete" dims="0"><PrimaryMethodInvocation name="subList"><Name name="candidates"/><Arguments><IntegerLiteral value="0"/><TypeMethodInvocation name="Math" ident="max"><ClassType name="Math"/><Arguments><IntegerLiteral value="0"/><Subt><PrimaryMethodInvocation name="size"><Name name="candidates"/><Arguments/></PrimaryMethodInvocation><Name name="numberToAlwaysKeep"/></Subt></Arguments></TypeMethodInvocation></Arguments></PrimaryMethodInvocation></VariableDeclarator></LocalVariableDeclarationStatement></xdd:insert><xdd:insert xdd:stid="11" xdd:path="2/0/1/45/3/0_4"><LocalVariableDeclarationStatement name="candidates[0"><ReferenceType name="List"><TypeArguments nth="1" name="java.util.List"><ReferenceType name="String"/></TypeArguments></ReferenceType><VariableDeclarator name="candidates" dims="0"><SimpleMethodInvocation name="sortedUnusedFileReferences"><Arguments><Name name="fileReferencesInUse"/><Name name="keepFileReferencesDuration"/></Arguments></SimpleMethodInvocation></VariableDeclarator></LocalVariableDeclarationStatement></xdd:insert><xdd:insert xdd:stid="14" xdd:path="2/0/1/45/3/0_3"><PrimaryMethodInvocationStatement name="log"><Name name="log"/><Arguments><Name name="Level.FINE"><Name name="Level"/></Name><Lambda><Parameters name=""/><Add><StringLiteral value="RmlsZSByZWZlcmVuY2VzIGluIHVzZSA6IA=="/><Name name="fileReferencesInUse"/></Add></Lambda></Arguments></PrimaryMethodInvocationStatement></xdd:insert><xdd:insert xdd:stid="15" xdd:path="2/0/1/45/3/0_2"><LocalVariableDeclarationStatement name="fileReferencesInUse[0"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String"/></TypeArguments></ReferenceType><VariableDeclarator name="fileReferencesInUse" dims="0"></VariableDeclarator></LocalVariableDeclarationStatement></xdd:insert><xdd:insert xdd:stid="18" xdd:path="2/0/1/45/3/0_1"><IfStatement><Negation><PrimaryMethodInvocation name="isDirectory"><Name name="fileReferencesPath"/><Arguments/></PrimaryMethodInvocation></Negation><ThrowStatement><StandardInstanceCreation name="RuntimeException"><ReferenceType name="RuntimeException"/><Arguments><Add><Name name="fileReferencesPath"/><StringLiteral value="IGlzIG5vdCBhIGRpcmVjdG9yeQ=="/></Add></Arguments></StandardInstanceCreation></ThrowStatement></IfStatement></xdd:insert><xdd:insert xdd:stid="19" xdd:path="2/0/1/45/3/0/1/1" xdd:boundary="1/0_1"><Lambda><Parameters name=""/><Add><StringLiteral value="S2VlcCB1bnVzZWQgZmlsZSByZWZlcmVuY2VzIGZvciA="/></Add></Lambda></xdd:insert><xdd:insert xdd:stid="20" xdd:path="2/0/1/45/3/0/1/1_-1"><Name name="Level.FINE"><Name name="Level"/></Name></xdd:insert><xdd:insert xdd:stid="21" xdd:path="2/0/1/45/3/0/1_-1"><Name name="log"/></xdd:insert><xdd:insert xdd:stid="22" xdd:path="2/0/1/45/2/1_1"><Parameter name="numberToAlwaysKeep" dims="0" va="false"><IntType/></Parameter></xdd:insert><xdd:insert xdd:stid="23" xdd:path="2/0/1/45/1/0"><TypeArguments nth="1" name="java.util.List"><ReferenceType name="String"/></TypeArguments></xdd:insert><xdd:insert xdd:stid="24" xdd:path="1/114_1"><SingleStaticImportDeclaration name="java.nio.file.Files" ident="readAttributes"/></xdd:insert><xdd:insert xdd:stid="25" xdd:path="1/111_1"><SingleStaticImportDeclaration name="com.yahoo.vespa.config.server.filedistribution.FileDistributionUtil" ident="getFileReferencesOnDisk"/></xdd:insert><xdd:insert xdd:stid="26" xdd:path="1/93_1"><SingleTypeImportDeclaration name="java.util.Comparator"/></xdd:insert><xdd:insert xdd:stid="27" xdd:path="1/89_1"><SingleTypeImportDeclaration name="java.nio.file.attribute.BasicFileAttributes"/></xdd:insert><xdd:insert xdd:stid="28" xdd:path="1/88_1"><SingleTypeImportDeclaration name="java.io.UncheckedIOException"/></xdd:insert><xdd:move xdd:mid="22" xdd:path_from="2/0/1/45/3/0/1/2" xdd:path_to="2/0/1/45/3/0_2/1/0" xdd:parent="15" xdd:depth="2"/><xdd:move xdd:mid="6" xdd:path_from="2/0/1/45/3/0/1/0" xdd:path_to="2/0/1/45/3/0_4/1/0/0/0_-1" xdd:parent="11" xdd:depth="4"/><xdd:move xdd:mid="10" xdd:path_from="2/0/1/45/3/0/0/1/0" xdd:path_to="2/0/1/46_1/3/2/1/0/0/0_-1" xdd:parent="4" xdd:depth="6"/><xdd:delete xdd:path="1/82"></xdd:delete><xdd:delete xdd:path="2/0/1/45/3/0/0" xdd:boundary="1/0"></xdd:delete></xdd:delta>