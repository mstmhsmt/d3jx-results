<xdd:delta xmlns:xdd="http://codinuum.com/diffts/delta/" xdd:reversible="false" xdd:normalized="false" xdd:lang="java" xdd:digest="MD5_2b9eb42ef39d9affb2d77b5675323a44" xdd:digest_=""><xdd:insert xdd:stid="0" xdd:path="2/0/1/39/1/0/1/2_1"><Parameter name="globalCheckpointSyncer" dims="0" va="false"><ReferenceType name="Consumer"><TypeArguments nth="1" name="java.util.function.Consumer"><ReferenceType name="ShardId" /></TypeArguments></ReferenceType></Parameter></xdd:insert><xdd:insert xdd:stid="1" xdd:path="2/0/1/37/1/4_1"><MethodDeclaration name="updateAllocationIdsFromMaster" ___signature="(LSet;LSet;)V"><Void /><Parameters name="(LSet;LSet;)V"><Parameter name="activeIds" dims="0" va="false"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String" /></TypeArguments></ReferenceType></Parameter><Parameter name="initializingIds" dims="0" va="false"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String" /></TypeArguments></ReferenceType></Parameter></Parameters></MethodDeclaration></xdd:insert><xdd:insert xdd:stid="2" xdd:path="2/0/1/29/3/2/0/0_1"><IfStatement><PrimaryMethodInvocation name="primary"><Name name="shardRouting" /><Arguments /></PrimaryMethodInvocation><Block><LocalVariableDeclarationStatement name="activeIds[0"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String" /></TypeArguments></ReferenceType><VariableDeclarator name="activeIds" dims="0"><PrimaryMethodInvocation name="collect"><PrimaryMethodInvocation name="map"><PrimaryMethodInvocation name="stream"><PrimaryMethodInvocation name="activeShards"><Name name="shardRoutingTable" /><Arguments /></PrimaryMethodInvocation><Arguments /></PrimaryMethodInvocation><Arguments><Lambda><InferredFormalParameter name="sr" /><PrimaryMethodInvocation name="getId"><PrimaryMethodInvocation name="allocationId"><Name name="sr" /><Arguments /></PrimaryMethodInvocation><Arguments /></PrimaryMethodInvocation></Lambda></Arguments></PrimaryMethodInvocation><Arguments><TypeMethodInvocation name="Collectors" ident="toSet"><ClassType name="Collectors" /><Arguments /></TypeMethodInvocation></Arguments></PrimaryMethodInvocation></VariableDeclarator></LocalVariableDeclarationStatement><LocalVariableDeclarationStatement name="initializingIds[0"><ReferenceType name="Set"><TypeArguments nth="1" name="java.util.Set"><ReferenceType name="String" /></TypeArguments></ReferenceType><VariableDeclarator name="initializingIds" dims="0"><PrimaryMethodInvocation name="collect"><PrimaryMethodInvocation name="map"><PrimaryMethodInvocation name="stream"><PrimaryMethodInvocation name="getAllInitializingShards"><Name name="shardRoutingTable" /><Arguments /></PrimaryMethodInvocation><Arguments /></PrimaryMethodInvocation><Arguments><Lambda><InferredFormalParameter name="sr" /><PrimaryMethodInvocation name="getId"><PrimaryMethodInvocation name="allocationId"><Name name="sr" /><Arguments /></PrimaryMethodInvocation><Arguments /></PrimaryMethodInvocation></Lambda></Arguments></PrimaryMethodInvocation><Arguments><TypeMethodInvocation name="Collectors" ident="toSet"><ClassType name="Collectors" /><Arguments /></TypeMethodInvocation></Arguments></PrimaryMethodInvocation></VariableDeclarator></LocalVariableDeclarationStatement><PrimaryMethodInvocationStatement name="updateAllocationIdsFromMaster"><Name name="shard" /><Arguments><Name name="activeIds" /><Name name="initializingIds" /></Arguments></PrimaryMethodInvocationStatement></Block></IfStatement></xdd:insert><xdd:insert xdd:stid="3" xdd:path="2/0/1/29/2/2_1"><Parameter name="shardRoutingTable" dims="0" va="false"><ReferenceType name="IndexShardRoutingTable" /></Parameter></xdd:insert><xdd:insert xdd:stid="4" xdd:path="2/0/1/27/3/4/2/1/1/3/2/0/0/0/2_1"><PrimaryMethodInvocation name="shardRoutingTable"><Name name="routingTable" /><Arguments><Name name="shardId" /></Arguments></PrimaryMethodInvocation></xdd:insert><xdd:insert xdd:stid="5" xdd:path="2/0/1/25/3/4/2/4/0/0/1/1/2_1"><FieldAccess name="globalCheckpointSyncer" /></xdd:insert><xdd:insert xdd:stid="6" xdd:path="2/0/1/15/1/1_1"><AssignStatement tid=""><FieldAccess name="globalCheckpointSyncer"><This /></FieldAccess><Name name="globalCheckpointSyncer" /></AssignStatement></xdd:insert><xdd:insert xdd:stid="7" xdd:path="2/0/1/15/0/12_1"><Parameter name="globalCheckpointSyncer" dims="0" va="false"><ReferenceType name="Consumer"><TypeArguments nth="1" name="java.util.function.Consumer"><ReferenceType name="ShardId" /></TypeArguments></ReferenceType></Parameter></xdd:insert><xdd:insert xdd:stid="8" xdd:path="2/0/1/14/2/0/0/12_1"><NameMethodReference name="globalCheckpointSyncAction" ident="updateCheckpointForShard" /></xdd:insert><xdd:insert xdd:stid="9" xdd:path="2/0/1/14/1/12_1"><Parameter name="globalCheckpointSyncAction" dims="0" va="false"><ReferenceType name="GlobalCheckpointSyncAction" /></Parameter></xdd:insert><xdd:insert xdd:stid="10" xdd:path="2/0/1/6_1"><FieldDeclaration name="globalCheckpointSyncer[0"><Modifiers><Private /><Final /></Modifiers><ReferenceType name="Consumer"><TypeArguments nth="1" name="java.util.function.Consumer"><ReferenceType name="ShardId" /></TypeArguments></ReferenceType><VariableDeclarator name="globalCheckpointSyncer" dims="0" /></FieldDeclaration></xdd:insert><xdd:insert xdd:stid="11" xdd:path="1/57_2"><SingleTypeImportDeclaration name="java.util.stream.Collectors" /></xdd:insert><xdd:insert xdd:stid="12" xdd:path="1/57_1"><SingleTypeImportDeclaration name="java.util.function.Consumer" /></xdd:insert><xdd:insert xdd:stid="13" xdd:path="1/29_1"><SingleTypeImportDeclaration name="org.elasticsearch.index.seqno.GlobalCheckpointSyncAction" /></xdd:insert><xdd:insert xdd:stid="14" xdd:path="1/8_1"><SingleTypeImportDeclaration name="org.elasticsearch.cluster.routing.IndexShardRoutingTable" /></xdd:insert><xdd:change_attr xdd:path="2/0/1/3/1" xdd:attr="name" xdd:new_value="PeerRecoveryTargetService" /><xdd:change_attr xdd:path="2/0/1/14/1/4/0" xdd:attr="name" xdd:new_value="PeerRecoveryTargetService" /><xdd:change_attr xdd:path="2/0/1/14/1/11/0" xdd:attr="name" xdd:new_value="PeerRecoverySourceService" /><xdd:change_attr xdd:path="2/0/1/14/1/11" xdd:attr="name" xdd:new_value="peerRecoverySourceService" /><xdd:change_attr xdd:path="2/0/1/14/2/0/0/11" xdd:attr="name" xdd:new_value="peerRecoverySourceService" /><xdd:change_attr xdd:path="2/0/1/15/0/4/0" xdd:attr="name" xdd:new_value="PeerRecoveryTargetService" /><xdd:change_attr xdd:path="2/0/1/15/0/11/0" xdd:attr="name" xdd:new_value="PeerRecoverySourceService" /><xdd:change_attr xdd:path="2/0/1/15/0/11" xdd:attr="name" xdd:new_value="peerRecoverySourceService" /><xdd:change_attr xdd:path="2/0/1/15/1/1/1/1/0" xdd:attr="name" xdd:new_value="peerRecoverySourceService" /><xdd:change_attr xdd:path="2/0/1/19/3/5/0/0" xdd:attr="name" xdd:new_value="event" /><xdd:change_attr xdd:path="2/0/1/20/3/3/1/2/2/0/0/1/2" xdd:attr="name" xdd:new_value="localShardFailed" /><xdd:change xdd:path="2/0/1/22/2/0" xdd:boundary="0;1"><LocalVariableDeclarationStatement name="state[0" /></xdd:change><xdd:change xdd:path="2/0/1/21/3/5/2/1/1/0/0/0" xdd:boundary="0;1"><Name name="state" /></xdd:change><xdd:change_attr xdd:path="2/0/1/24/3/5/2/0/2/3/2/0/0/0" xdd:attr="name" xdd:new_value="recoverySource" /><xdd:change_attr xdd:path="2/0/1/24/3/5/2/0/2/3/2/0/0/1/2/1/0/1/0/1/0" xdd:attr="value" xdd:new_value="e30gcmVtb3Zpbmcgc2hhcmQgKHJlY292ZXJ5IHNvdXJjZSBjaGFuZ2VkKSwgY3VycmVudCBbe31dLCBnbG9iYWwgW3t9XSwgc2hhcmQgW3t9XSk=" /><xdd:change_attr xdd:path="2/0/1/24/3/5/2/0/2/3/2/0/0/1/2/1/0/1/0/1/2" xdd:attr="name" xdd:new_value="sourceNode" /><xdd:change_attr xdd:path="2/0/1/28/3/2/0" xdd:attr="name" xdd:new_value="recoverySource" /><xdd:change xdd:path="2/0/1/28/3/3/0/1/1/0" xdd:boundary="0"><StandardInstanceCreation name="RecoveryState" /></xdd:change><xdd:change_attr xdd:path="2/0/1/30/2/0/0" xdd:attr="name" xdd:new_value="Logger" /><xdd:change_attr xdd:path="2/0/1/31/0/1/0" xdd:attr="name" xdd:new_value="PeerRecoveryTargetService.RecoveryListener" /><xdd:change_attr xdd:path="2/0/1/31/1/2/3/0/0/1/0/0" xdd:attr="name" xdd:new_value="Type" /><xdd:change_attr xdd:path="2/0/1/31/1/2/3/0/0/1" xdd:attr="name" xdd:new_value="Type.SNAPSHOT" /><xdd:change xdd:path="2/0/1/31/1/2/3/0/1/0/1/0/0" xdd:boundary="0;1"><Name name="snapshotRecoverySource" /></xdd:change><xdd:change xdd:path="2/0/1/31/1/2/3/1/1/1" xdd:boundary="0"><Add /></xdd:change><xdd:change_attr xdd:path="2/0/1/31/1/4/3/0/0/1/0/0" xdd:attr="name" xdd:new_value="Type" /><xdd:change_attr xdd:path="2/0/1/31/1/4/3/0/0/1" xdd:attr="name" xdd:new_value="Type.SNAPSHOT" /><xdd:change xdd:path="2/0/1/31/1/4/3/0/1/0/0/0/1/0/1/0/0" xdd:boundary="0;1"><Name name="snapshotRecoverySource" /></xdd:change><xdd:change_attr xdd:path="2/0/1/35/3/0/0/2" xdd:attr="name" xdd:new_value="localShardFailed" /><xdd:change_attr xdd:path="2/0/1/39/1/6/1/2/0" xdd:attr="name" xdd:new_value="PeerRecoveryTargetService" /><xdd:change_attr xdd:path="2/0/1/39/1/6/1/3/0" xdd:attr="name" xdd:new_value="PeerRecoveryTargetService.RecoveryListener" /><xdd:insert xdd:stid="35" xdd:path="2/0/1/39/1/8/2/1_1"><ReferenceType name="ShardLockObtainFailedException" /></xdd:insert><xdd:insert xdd:stid="38" xdd:path="2/0/1/35/3/0/1/1/1/1/0" xdd:boundary="1/1/1/0;1/1/1/0_0.1;1/1/1/0_1;1/1/1/0_2;1/1/1/0_3"><Cast><ReferenceType name="Supplier"><TypeArguments nth="1" name="org.apache.logging.log4j.util.Supplier"><Wildcard /></TypeArguments></ReferenceType><Lambda><Parameters name="" /><StandardInstanceCreation name="ParameterizedMessage"><ReferenceType name="ParameterizedMessage" /><Arguments /></StandardInstanceCreation></Lambda></Cast></xdd:insert><xdd:insert xdd:stid="41" xdd:path="2/0/1/35/3/0/0/0/1/0" xdd:boundary="1/1/1/0;1/1/1/0_0.1;1/1/1/0_1;1/1/1/0_2"><Cast><ReferenceType name="Supplier"><TypeArguments nth="1" name="org.apache.logging.log4j.util.Supplier"><Wildcard /></TypeArguments></ReferenceType><Lambda><Parameters name="" /><StandardInstanceCreation name="ParameterizedMessage"><ReferenceType name="ParameterizedMessage" /><Arguments /></StandardInstanceCreation></Lambda></Cast></xdd:insert><xdd:insert xdd:stid="44" xdd:path="2/0/1/34/3/0/2/1/1/1/0" xdd:boundary="1/1/1/0;1/1/1/0_0.1;1/1/1/0_1;1/1/1/0_2;1/1/1/0_3"><Cast><ReferenceType name="Supplier"><TypeArguments nth="1" name="org.apache.logging.log4j.util.Supplier"><Wildcard /></TypeArguments></ReferenceType><Lambda><Parameters name="" /><StandardInstanceCreation name="ParameterizedMessage"><ReferenceType name="ParameterizedMessage" /><Arguments /></StandardInstanceCreation></Lambda></Cast></xdd:insert><xdd:insert xdd:stid="45" xdd:path="2/0/1/31/1/4/3/0/1/0/0/0/1/0_-1"><LocalVariableDeclarationStatement name="snapshotRecoverySource[0"><ReferenceType name="SnapshotRecoverySource" /><VariableDeclarator name="snapshotRecoverySource" dims="0"><Cast><ReferenceType name="SnapshotRecoverySource" /><PrimaryMethodInvocation name="getRecoverySource"><Name name="state" /><Arguments /></PrimaryMethodInvocation></Cast></VariableDeclarator></LocalVariableDeclarationStatement></xdd:insert><xdd:insert xdd:stid="46" xdd:path="2/0/1/31/1/4/3/0/0/0/0" xdd:boundary="0_-1"><PrimaryMethodInvocation name="getRecoverySource"><Arguments /></PrimaryMethodInvocation></xdd:insert><xdd:insert xdd:stid="47" xdd:path="2/0/1/31/1/2/3/1/1/1/0/0" xdd:boundary="0_-1"><PrimaryMethodInvocation name="getRecoverySource"><Arguments /></PrimaryMethodInvocation></xdd:insert><xdd:insert xdd:stid="48" xdd:path="2/0/1/31/1/2/3/1/1/1/0_-1"><StringLiteral value="YWZ0ZXIg" /></xdd:insert><xdd:insert xdd:stid="49" xdd:path="2/0/1/31/1/2/3/0/1/0_-1"><LocalVariableDeclarationStatement name="snapshotRecoverySource[0"><ReferenceType name="SnapshotRecoverySource" /><VariableDeclarator name="snapshotRecoverySource" dims="0"><Cast><ReferenceType name="SnapshotRecoverySource" /><PrimaryMethodInvocation name="getRecoverySource"><Name name="state" /><Arguments /></PrimaryMethodInvocation></Cast></VariableDeclarator></LocalVariableDeclarationStatement></xdd:insert><xdd:insert xdd:stid="50" xdd:path="2/0/1/31/1/2/3/0/0/0/0" xdd:boundary="0_-1"><PrimaryMethodInvocation name="getRecoverySource"><Arguments /></PrimaryMethodInvocation></xdd:insert><xdd:insert xdd:stid="53" xdd:path="2/0/1/28/3/3/0/1/1/0/0_-1"><ReferenceType name="RecoveryState" /></xdd:insert><xdd:insert xdd:stid="54" xdd:path="2/0/1/28/3/2/0" xdd:boundary="0/0_-1"><Eq><PrimaryMethodInvocation name="getType"><Arguments /></PrimaryMethodInvocation><Name name="Type.PEER"><Name name="Type" /></Name></Eq></xdd:insert><xdd:insert xdd:stid="55" xdd:path="2/0/1/24/3/5/2/0/2/3/2/0/0/1/2/1/0/1/0/1/1_1"><PrimaryMethodInvocation name="getSourceNode"><Name name="recoveryState" /><Arguments /></PrimaryMethodInvocation></xdd:insert><xdd:insert xdd:stid="56" xdd:path="2/0/1/24/3/5/2/0/2/3/2/0/0/0" xdd:boundary="0/0_-1"><And><NotEq><NullLiteral /></NotEq><Eq><PrimaryMethodInvocation name="getType"><PrimaryMethodInvocation name="recoverySource"><Name name="newShardRouting" /><Arguments /></PrimaryMethodInvocation><Arguments /></PrimaryMethodInvocation><Name name="Type.PEER"><Name name="Type" /></Name></Eq></And></xdd:insert><xdd:insert xdd:stid="57" xdd:path="2/0/1/22/3/5/2/1/1/0_-2"><AssertStatement><Or><NotEq><NullLiteral /></NotEq><PrimaryMethodInvocation name="isNewCluster"><Name name="event" /><Arguments /></PrimaryMethodInvocation></Or><NaryAdd><StringLiteral value="aW5kZXgg" /><Name name="index" /><StringLiteral value="IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjbHVzdGVyIHN0YXRlLCBpdCBzaG91bGQgZWl0aGVyIA==" /><StringLiteral value="aGF2ZSBiZWVuIGRlbGV0ZWQgb3IgdGhlIGNsdXN0ZXIgbXVzdCBiZSBuZXc=" /></NaryAdd></AssertStatement></xdd:insert><xdd:insert xdd:stid="62" xdd:path="2/0/1/22/3/0_-6/0_1" xdd:parent="m73" xdd:depth="1"><VariableDeclarator name="state" dims="0" /></xdd:insert><xdd:insert xdd:stid="65" xdd:path="2/0/1/22/3/0_-6/0_-1" xdd:parent="m73" xdd:depth="1"><Modifiers><Final /></Modifiers></xdd:insert><xdd:insert xdd:stid="66" xdd:path="2/0/1/22/2/0/0$" xdd:boundary="0_-1"><Parameter name="event" dims="0" va="false"><ReferenceType name="ClusterChangedEvent" /></Parameter></xdd:insert><xdd:insert xdd:stid="67" xdd:path="2/0/1/21/3/4/2/4/1/0/1/0/2/0/3/0/1/0" xdd:boundary="1/1/1/0"><Cast><ReferenceType name="Supplier"><TypeArguments nth="1" name="org.apache.logging.log4j.util.Supplier"><Wildcard /></TypeArguments></ReferenceType><Lambda><Parameters name="" /><StandardInstanceCreation name="ParameterizedMessage"><ReferenceType name="ParameterizedMessage" /><Arguments /></StandardInstanceCreation></Lambda></Cast></xdd:insert><xdd:insert xdd:stid="70" xdd:path="1/38_2"><SingleTypeImportDeclaration name="org.elasticsearch.indices.recovery.PeerRecoveryTargetService" /></xdd:insert><xdd:insert xdd:stid="71" xdd:path="1/38_1"><SingleTypeImportDeclaration name="org.elasticsearch.indices.recovery.PeerRecoverySourceService" /></xdd:insert><xdd:insert xdd:stid="72" xdd:path="1/22_1"><SingleTypeImportDeclaration name="org.elasticsearch.env.ShardLockObtainFailedException" /></xdd:insert><xdd:insert xdd:stid="73" xdd:path="1/8_2"><SingleTypeImportDeclaration name="org.elasticsearch.cluster.routing.RecoverySource.Type" /></xdd:insert><xdd:insert xdd:stid="74" xdd:path="1/8_1"><SingleTypeImportDeclaration name="org.elasticsearch.cluster.routing.RecoverySource.SnapshotRecoverySource" /></xdd:insert><xdd:insert xdd:stid="75" xdd:path="1/0_-60"><SingleTypeImportDeclaration name="org.apache.logging.log4j.util.Supplier" /></xdd:insert><xdd:insert xdd:stid="76" xdd:path="1/0_-61"><SingleTypeImportDeclaration name="org.apache.logging.log4j.message.ParameterizedMessage" /></xdd:insert><xdd:insert xdd:stid="77" xdd:path="1/0_-62"><SingleTypeImportDeclaration name="org.apache.logging.log4j.Logger" /></xdd:insert><xdd:move xdd:mid="9" xdd:path_from="2/0/1/21/3/4/2/4/1/0/1/0/2/0/3/0/1/2" xdd:path_to="2/0/1/21/3/4/2/4/1/0/1/0/2/0/3/0/1/1_-1/1/1/1/0_1" xdd:parent="67" xdd:depth="4" /><xdd:move xdd:mid="76" xdd:path_from="2/0/1/21/3/5/2/2/1/0/1/6/0" xdd:path_to="2/0/1/22/3/0_-6/1/0" xdd:parent="62" xdd:depth="1" /><xdd:move xdd:mid="73" xdd:mctl="F" xdd:path_from="2/0/1/22/2/0" xdd:path_to="2/0/1/22/3/0_-6" xdd:boundary_from="0" /><xdd:move xdd:mid="71" xdd:path_from="2/0/1/21/3/5/2/1/1/0" xdd:path_to="2/0/1/22/3/5/2/1/1/0_-2/0/0/0_-1" xdd:parent="57" xdd:depth="3" xdd:boundary_from="0/0/0;0/0/1" /><xdd:move xdd:mid="48" xdd:path_from="2/0/1/28/3/3/0/1/1/0/0/2" xdd:path_to="2/0/1/28/3/3/0/1/1/0/0/0_-2" /><xdd:move xdd:mid="29" xdd:path_from="2/0/1/34/3/0/2/1/1/1/1" xdd:path_to="2/0/1/34/3/0/2/1/1/1/4_1" /><xdd:move xdd:mid="3" xdd:path_from="2/0/1/35/3/0/0/0/1/1" xdd:path_to="2/0/1/35/3/0/0/0/1/3_1" /><xdd:move xdd:mid="11" xdd:path_from="2/0/1/35/3/0/1/1/1/1/1" xdd:path_to="2/0/1/35/3/0/1/1/1/1/4_1" /><xdd:delete xdd:path="1/16" /><xdd:delete xdd:path="1/40" /><xdd:delete xdd:path="1/42" /><xdd:delete xdd:path="2/0/1/20/3/3/1/2/2/0/0/1/2/1/0" /><xdd:delete xdd:path="2/0/1/21/3/5/2/1/1/0/0/0/0" /><xdd:delete xdd:path="2/0/1/21/3/5/2/1/1/0/0/0/1" /><xdd:delete xdd:path="2/0/1/21/3/5" xdd:boundary="2/1/1/0;2/2/1/0/1/6/0" /><xdd:delete xdd:path="2/0/1/27/3/4/2/1/1/3/1/1/0/3" /><xdd:delete xdd:path="2/0/1/28/2/3" /><xdd:delete xdd:path="2/0/1/28/3/3/0/1/1/0/0/3" /><xdd:delete xdd:path="2/0/1/31/1/2/3/0/0/1/0" xdd:boundary="0" /><xdd:delete xdd:path="2/0/1/31/1/2/3/0/1/0/1/0/0/0" /><xdd:delete xdd:path="2/0/1/31/1/2/3/0/1/0/1/0/0/1" /><xdd:delete xdd:path="2/0/1/31/1/2/3/1/1/1/0" xdd:boundary="0" /><xdd:delete xdd:path="2/0/1/31/1/3" /><xdd:delete xdd:path="2/0/1/31/1/4/3/0/0/1/0" xdd:boundary="0" /><xdd:delete xdd:path="2/0/1/31/1/4/3/0/1/0/0/0/1/0/1/0/0/0" /><xdd:delete xdd:path="2/0/1/31/1/4/3/0/1/0/0/0/1/0/1/0/0/1" /><xdd:delete xdd:path="2/0/1/32" /><xdd:delete xdd:path="2/0/1/35/3/0/0/2/1/1" /></xdd:delta>