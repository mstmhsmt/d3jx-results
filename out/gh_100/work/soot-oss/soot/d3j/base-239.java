// generated by Diff/AST Java Unparser
package soot.dava;
import soot.AbstractUnitPrinter;
import soot.ArrayType;
import soot.RefType;
import soot.SootFieldRef;
import soot.SootMethodRef;
import soot.Type;
import soot.Unit;
import soot.dava.toolkits.base.renamer.RemoveFullyQualifiedName;
import soot.jimple.IdentityRef;
import soot.jimple.Jimple;
import soot.jimple.ThisRef;
public class DavaUnitPrinter extends AbstractUnitPrinter {
  DavaBody body;
  public DavaUnitPrinter(DavaBody body) { this.body = body; }
  public void methodRef(SootMethodRef m) {
    handleIndent();
    output.append(m.name());
  }
  public void fieldRef(SootFieldRef f) {
    handleIndent();
    output.append(f.name());
  }
  public void identityRef(IdentityRef r) {
    handleIndent();
    if (r instanceof ThisRef) {
      literal("this");
    } else
      throw new RuntimeException();
  }
  private boolean eatSpace = false;
  public void literal(String s) {
    handleIndent();
    if (eatSpace && s.equals(" ")) {
      eatSpace = false;
      return;
    }
    eatSpace = false;
    if (false || s.equals(Jimple.STATICINVOKE) ||
        s.equals(Jimple.VIRTUALINVOKE) || s.equals(Jimple.INTERFACEINVOKE)) {
      eatSpace = true;
      return;
    }
    output.append(s);
  }
  public void type(Type t) {
    handleIndent();
    if (t instanceof RefType) {
      String name = ((RefType)t).getSootClass().getJavaStyleName();
      if (!name.equals(((RefType)t).getSootClass().toString())) {
        name = RemoveFullyQualifiedName.getReducedName(
            body.getImportList(), ((RefType)t).getSootClass().toString(), t);
      }
      output.append(name);
    } else if (t instanceof ArrayType) {
      ((ArrayType)t).toString(this);
    } else {
      output.append(t.toString());
    }
  }
  public void unitRef(Unit u, boolean branchTarget) {
    throw new RuntimeException("Dava doesn't have unit references!");
  }
  public void addNot() { output.append(" !"); }
  public void addAggregatedOr() { output.append(" || "); }
  public void addAggregatedAnd() { output.append(" && "); }
  public void addLeftParen() { output.append(" ("); }
  public void addRightParen() { output.append(") "); }
  public void printString(String s) { output.append(s); }
}