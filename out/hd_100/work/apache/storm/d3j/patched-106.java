// generated by Diff/AST Java Unparser
package backtype.storm.messaging.netty;
import java.io.IOException;
import org.jboss.netty.buffer.ChannelBuffer;
import org.jboss.netty.buffer.ChannelBufferOutputStream;
import org.jboss.netty.buffer.ChannelBuffers;
<<<<<<< /root/work/apache/storm/d3j/patched-106-0.java
public class SaslMessageToken implements INettySerializable {
  public static final short IDENTIFIER = -500;
||||||| /root/work/apache/storm/d3j/base-106.java
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
public class SaslMessageToken {
  private static final Logger LOG =
      LoggerFactory.getLogger(SaslMessageToken.class);
=======
public class SaslMessageToken implements INettySerializable {
>>>>>>> /root/work/apache/storm/d3j/patched-106-1.java
  private byte[] token;
  public SaslMessageToken() {}
  public SaslMessageToken(byte[] token) { this.token = token; }
  public byte[] getSaslToken() { return token; }
  public void setSaslToken(byte[] token) { this.token = token; }
  public int encodeLength() { return 2 + 4 + token.length; }
  public ChannelBuffer buffer() throws IOException {
    ChannelBufferOutputStream bout = new ChannelBufferOutputStream(
        ChannelBuffers.directBuffer(encodeLength()));
    int payload_len = 0;
    if (token != null)
      payload_len = token.length;
<<<<<<< /root/work/apache/storm/d3j/patched-106-0.java
    bout.writeShort(IDENTIFIER);
    bout.writeInt(payload_len);
||||||| /root/work/apache/storm/d3j/base-106.java
    bout.writeShort((short)identifier);
    bout.writeInt((int)payload_len);
=======
    bout.writeShort(identifier);
    bout.writeInt(payload_len);
>>>>>>> /root/work/apache/storm/d3j/patched-106-1.java
    if (payload_len > 0) {
      bout.write(token);
    }
    bout.close();
    return bout.buffer();
  }
  public static SaslMessageToken read(byte[] serial) {
    ChannelBuffer sm_buffer = ChannelBuffers.copiedBuffer(serial);
    short identifier = sm_buffer.readShort();
    int payload_len = sm_buffer.readInt();
    if (identifier != -500) {
      return null;
    }
    byte token[] = new byte[payload_len];
    sm_buffer.readBytes(token, 0, payload_len);
    return new SaslMessageToken(token);
  }
}