// generated by Diff/AST Java Unparser
package org.gradle.logging;
import org.gradle.api.Action;
import org.gradle.internal.Actions;
import org.gradle.cli.CommandLineConverter;
import org.gradle.internal.Factory;
import org.gradle.internal.TimeProvider;
import org.gradle.internal.TrueTimeProvider;
import org.gradle.internal.nativeintegration.console.FallbackConsoleMetaData;
import org.gradle.internal.service.DefaultServiceRegistry;
import org.gradle.logging.internal.*;
import org.gradle.logging.internal.logback.LogbackLoggingConfigurer;
public
abstract
class LoggingServiceRegistry extends DefaultServiceRegistry
{
   private TextStreamOutputEventListener stdoutListener;
   public
   static
   LoggingServiceRegistry newCommandLineProcessLogging() {
     return new CommandLineLogging();
   }
   public
   static
   LoggingServiceRegistry newProcessLogging() {
     return new ChildProcessLogging();
   }
   public
   static
   LoggingServiceRegistry newEmbeddableLogging() {
     return new EmbeddedLogging();
   }
   public
   static
   LoggingServiceRegistry newToolingApiLogging() {
     return new NestedToolingLogging();
   }
   public
   LoggingServiceRegistry newLogging() {
     return new NestedLogging();
   }
   public
   LoggingServiceRegistry newColoredLogging(Console console) {
     return new ColoredLogging(console);
   }
   protected
   CommandLineConverter<LoggingConfiguration> createCommandLineConverter() {
     return new LoggingCommandLineConverter();
   }
   protected
   TimeProvider createTimeProvider() {
     return new TrueTimeProvider();
   }
   protected
   StyledTextOutputFactory createStyledTextOutputFactory() {
     return new DefaultStyledTextOutputFactory(getStdoutListener(),
              get(TimeProvider.class));
   }
   protected
   TextStreamOutputEventListener getStdoutListener() {
     if (stdoutListener == null) {
       stdoutListener =
       new TextStreamOutputEventListener(get(OutputEventListener.class));
     }
     return stdoutListener;
   }
   protected
   ProgressLoggerFactory createProgressLoggerFactory() {
     return new DefaultProgressLoggerFactory(new ProgressLoggingBridge(
                                               get(OutputEventListener.class)),
              get(TimeProvider.class));
   }
   protected
   abstract
   Factory<LoggingManagerInternal> createLoggingManagerFactory();
   protected
   OutputEventRenderer createOutputEventRenderer() {
     OutputEventRenderer renderer =
       new OutputEventRenderer(Actions.doNothing());
     renderer.addStandardOutputAndError();
     return renderer;
   }
   private
   static
   class ChildProcessLogging extends LoggingServiceRegistry
   {
      protected
      Factory<LoggingManagerInternal> createLoggingManagerFactory() {
        OutputEventRenderer renderer = get(OutputEventRenderer.class);
        LoggingSystem stdout =
          new DefaultStdOutLoggingSystem(getStdoutListener(),
            get(TimeProvider.class));
        LoggingSystem stderr =
          new DefaultStdErrLoggingSystem(new TextStreamOutputEventListener(
                                           get(OutputEventListener.class)),
            get(TimeProvider.class));
        return new DefaultLoggingManagerFactory(new DefaultLoggingConfigurer(renderer,
                                                  new LogbackLoggingConfigurer(renderer),
                                                  new JavaUtilLoggingConfigurer()),
                 renderer, stdout, stderr);
      }
   }
   private
   static
   class CommandLineLogging extends ChildProcessLogging
   {
      protected
      OutputEventRenderer createOutputEventRenderer() {
        OutputEventRenderer renderer =
          new OutputEventRenderer(new ConsoleConfigureAction());
        renderer.addStandardOutputAndError();
        return renderer;
      }
   }
   private
   static
   class EmbeddedLogging extends LoggingServiceRegistry
   {
      protected
      Factory<LoggingManagerInternal> createLoggingManagerFactory() {
        OutputEventRenderer renderer = get(OutputEventRenderer.class);
        return new DefaultLoggingManagerFactory(new DefaultLoggingConfigurer(renderer,
                                                  new LogbackLoggingConfigurer(renderer)),
                 renderer, new NoOpLoggingSystem(), new NoOpLoggingSystem());
      }
   }
   private
   static
   class NestedLogging extends LoggingServiceRegistry
   {
      protected
      Factory<LoggingManagerInternal> createLoggingManagerFactory() {
        OutputEventRenderer renderer = get(OutputEventRenderer.class);
        return new DefaultLoggingManagerFactory(renderer, renderer,
                 new NoOpLoggingSystem(), new NoOpLoggingSystem());
      }
   }
   private
   static
   class ColoredLogging extends NestedLogging
   {
      final Console console;
      ColoredLogging(Console console) {
        this.console = console;
      }
      protected
      OutputEventRenderer createOutputEventRenderer() {
        OutputEventRenderer renderer =
          new OutputEventRenderer(new Action<OutputEventRenderer>()
                                  {
                                     public
                                     void execute(OutputEventRenderer outputEventRenderer) {
                                       outputEventRenderer.addConsole(console,
                                         true, true,
                                         new FallbackConsoleMetaData());
                                     }
                                  });
        return renderer;
      }
   }
   private
   static
   class NestedToolingLogging extends NestedLogging
   {
      protected
      OutputEventRenderer createOutputEventRenderer() {
        OutputEventRenderer renderer =
          new OutputEventRenderer(Actions.doNothing());
        return renderer;
      }
   }
}